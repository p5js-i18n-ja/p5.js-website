---
title: onended
module: DOM
submodule: DOM
file: src/dom/dom.js
description: |
  <p>オーディオ/ビデオの再生が終了したときに関数を呼び出します。</p>
  <p>要素がコールバック関数に引数として渡されます。</p>
  <p>注意：メディアがループしている場合、この関数は呼び出されません。</p>
line: 5006
isConstructor: false
itemtype: method
example:
  - |-

    <div>
    <code>
    let beat;
    let isPlaying = false;
    let isDone = false;

    function setup() {
      createCanvas(100, 100);

      // createAudio()を使用してp5.MediaElementを作成します。
      beat = createAudio('/assets/beat.mp3');

      // ビートが終了したらhandleEnd()を呼び出します。
      beat.onended(handleEnd);

      describe('グレーの四角形に黒字で「クリックして再生」と書かれています。ユーザーがクリックするとビートが再生されます。ビートの再生が終わると「完了！」というテキストが表示されます。');
    }

    function draw() {
      background(200);

      // テキストのスタイルを設定します。
      textAlign(CENTER);
      textSize(16);

      // 再生状態に基づいて異なるメッセージを表示します。
      if (isDone === true) {
        text('完了！', 50, 50);
      } else if (isPlaying === false) {
        text('クリックして再生', 50, 50);
      } else {
        text('再生中...', 50, 50);
      }
    }

    // ユーザーがマウスを押したらビートを再生します。
    function mousePressed() {
      if (isPlaying === false) {
        isPlaying = true;
        beat.play();
      }
    }

    // 再生が終了したらisDoneを設定します。
    function handleEnd() {
      isDone = false;
    }
    </code>
    </div>
class: p5.MediaElement
params:
  - name: callback
    description: |
      <p>再生が終了したときに呼び出す関数。
                                  <code>p5.MediaElement</code>が引数として
                                  渡されます。</p>
    type: Function
chainable: true
---


# onended

