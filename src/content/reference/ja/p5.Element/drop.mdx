---
title: drop
module: DOM
submodule: DOM
file: src/dom/dom.js
description: >
  <p>要素上にユーザーがファイルをドロップしたときに関数を呼び出します。</p>

  <p>最初のパラメータ <code>callback</code> は、ファイルがロードされたときに呼び出される関数です。

  コールバック関数は1つのパラメータ <code>file</code> を持ち、これは

  <a href="/reference/p5/p5.File">p5.File</a> オブジェクトです。ユーザーが複数のファイルを

  要素上にドロップした場合、<code>callback</code> はファイルごとに1回ずつ呼び出されます。</p>

  <p>2番目のパラメータ <code>fxn</code> は、ブラウザが1つ以上のドロップされたファイルを

  検出したときに呼び出される関数です。コールバック関数は1つの

  パラメータ <code>event</code> を持ち、これは

  <a
  href="https://developer.mozilla.org/en-US/docs/Web/API/DragEvent/">DragEvent</a> です。</p>
line: 3772
isConstructor: false
itemtype: method
example:
  - |-

    <div>
    <code>
    // この例を見るには、キャンバスに画像を
    // ドロップしてください。
    let img;

    function setup() {
      let c = createCanvas(100, 100);

      background(200);

      // キャンバスにドロップされたファイルがロードされたときにhandleFile()を呼び出します。
      c.drop(handleFile);

      describe('灰色の正方形。ユーザーが正方形に画像をドロップすると、その画像が表示されます。');
    }

    // 既存の画像を削除し、新しい画像を表示します。
    function handleFile(file) {
      // 現在の画像があれば削除します。
      if (img) {
        img.remove();
      }

      // ドロップされたファイルで<img>要素を
      // 作成します。
      img = createImg(file.data, '');
      img.hide();

      // 画像を描画します。
      image(img, 0, 0, width, height);
    }
    </code>
    </div>

    <div>
    <code>
    // この例を見るには、キャンバスに画像を
    // ドロップしてください。
    let img;
    let msg;

    function setup() {
      let c = createCanvas(100, 100);

      background(200);

      // ユーザーがキャンバスにファイルをドロップしたとき、
      // およびファイルがロードされたときに関数を呼び出します。
      c.drop(handleFile, handleDrop);

      describe('灰色の正方形。ユーザーが正方形に画像をドロップすると、その画像が表示されます。キャンバス要素のid属性も表示されます。');
    }

    // 画像がロードされたときに表示します。
    function handleFile(file) {
      // 現在の画像があれば削除します。
      if (img) {
        img.remove();
      }

      // ドロップされたファイルでimg要素を作成します。
      img = createImg(file.data, '');
      img.hide();

      // 画像を描画します。
      image(img, 0, 0, width, height);
    }

    // ファイルがロードされたときにその名前を表示します。
    function handleDrop(event) {
      // 現在の段落があれば削除します。
      if (msg) {
        msg.remove();
      }

      // イベントを使用してドロップ対象のidを取得します。
      let id = event.target.id;

      // キャンバスのidをその下に書きます。
      msg = createP(id);
      msg.position(0, 100);

      // ドロップごとにフォントの色をランダムに設定します。
      let c = random(['red', 'green', 'blue']);
      msg.style('color', c);
      msg.style('font-size', '12px');
    }
    </code>
    </div>
class: p5.Element
params:
  - name: callback
    description: |
      <p>ファイルがロードされたときに呼び出されます。ドロップされた各ファイルに対して1回ずつ呼び出されます。</p>
    type: Function
  - name: fxn
    description: |
      <p>ファイルがドロップされたときに1回だけ呼び出されます。</p>
    type: Function
    optional: true
chainable: true
---


# drop

