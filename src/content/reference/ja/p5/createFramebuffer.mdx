---
title: createFramebuffer
module: Rendering
submodule: Rendering
file: src/core/rendering.js
description: >-
  <p>新しい <a href="#/p5.Framebuffer">p5.Framebuffer</a> を作成し返します。</p>

  <p>これは高性能な WebGL オブジェクトで、これに描画したり、テクスチャとして使用することができます。</p>

  <p>オプションには以下のものがあります: <ul> <li><code>format</code>:
  テクスチャのデータフォーマット。<code>UNSIGNED_BYTE</code>、<code>FLOAT</code>、<code>HALF_FLOAT</code>
  のいずれか。デフォルトは <code>UNSIGNED_BYTE</code> です。</li> <li><code>channels</code>:
  保存する色チャンネル。<code>RGB</code> または
  <code>RGBA</code>。デフォルトでは、メインキャンバスのチャンネルを一致させます（<code>setAttributes</code>
  で無効化しない限り、アルファが含まれます）。</li> <li><code>depth</code>:
  デプスバッファを含めるかどうかのブール値。デフォルトは true です。</li> <li><code>depthFormat</code>:
  デプス情報のデータフォーマット。<code>UNSIGNED_INT</code> または
  <code>FLOAT</code>。デフォルトは利用可能な場合は <code>FLOAT</code>、それ以外の場合は
  <code>UNSIGNED_INT</code> です。</li> <li><code>antialias</code>:
  ブール値または数値で、エッジが滑らかになるようにレンダリングするかどうか、またはその場合、使用するサンプルの数。メインキャンバスが滑らかに描画されるかどうかにもとづきますが、デフォルトでは2つのサンプルを使用します。アンチエイリアシングは
  WebGL 2 が利用可能な場合のみサポートされます。</li> <li><code>width</code>:
  テクスチャの幅。デフォルトはメインキャンバスと一致します。</li> <li><code>height</code>:
  テクスチャの高さ。デフォルトはメインキャンバスと一致します。</li> <li><code>density</code>:
  テクスチャのピクセル密度。デフォルトはメインキャンバスのピクセル密度と一致します。</li>
  <li><code>textureFiltering</code>:
  <code>LINEAR</code>（色テクスチャから値を読み取る際に近くのピクセルが補間されます）か
  <code>NEAREST</code>（補間なし）。通常、テクスチャを画像として使用する場合は <code>LINEAR</code>
  を、テクスチャをデータとして読み取る場合は <code>NEAREST</code> を使用します。デフォルトは <code>LINEAR</code>
  です。</li> </ul></p>

  <p><code>width</code>、<code>height</code>、<code>density</code>
  が指定されている場合、フレームバッファはそのサイズを手動で変更されるまで保持されます。それ以外の場合は、自動サイズが設定され、メインキャンバスのサイズや密度が変更されたときにそれに合わせて更新されます。</p>

  <p>/// todo ///</p>

  <p>Creates and returns a new <a href="#/p5.Framebuffer">p5.Framebuffer</a>, a
  high-performance WebGL object that you can draw to and then use as a
  texture.</p>

  <p>Options can include: <ul> <li><code>format</code>: The data format of the
  texture, either <code>UNSIGNED_BYTE</code>, <code>FLOAT</code>, or
  <code>HALF_FLOAT</code>. The default is <code>UNSIGNED_BYTE</code>.</li>
  <li><code>channels</code>: What color channels to store, either
  <code>RGB</code> or <code>RGBA</code>. The default is to match the channels in
  the main canvas (with alpha unless disabled with
  <code>setAttributes</code>.)</li> <li><code>depth</code>: A boolean, whether
  or not to include a depth buffer. Defaults to true.</li>
  <li><code>depthFormat</code>: The data format for depth information, either
  <code>UNSIGNED_INT</code> or <code>FLOAT</code>. The default is
  <code>FLOAT</code> if available, or <code>UNSIGNED_INT</code> otherwise.</li>
  <li><code>stencil</code>: A boolean, whether or not to include a stencil
  buffer, which can be used for masking. This may only be used if also using a
  depth buffer. Defaults to the value of <code>depth</code>, which is true if
  not provided.</li> <li><code>antialias</code>: Boolean or Number, whether or
  not to render with antialiased edges, and if so, optionally the number of
  samples to use. Defaults to whether or not the main canvas is antialiased,
  using a default of 2 samples if so. Antialiasing is only supported when WebGL
  2 is available.</li> <li><code>width</code>: The width of the texture.
  Defaults to matching the main canvas.</li> <li><code>height</code>: The height
  of the texture. Defaults to matching the main canvas.</li>
  <li><code>density</code>: The pixel density of the texture. Defaults to the
  pixel density of the main canvas.</li> <li><code>textureFiltering</code>:
  Either <code>LINEAR</code> (nearby pixels will be interpolated when reading
  values from the color texture) or <code>NEAREST</code> (no interpolation.)
  Generally, use <code>LINEAR</code> when using the texture as an image, and use
  <code>NEAREST</code> if reading the texture as data. Defaults to
  <code>LINEAR</code>.</li> </ul></p>

  <p>If <code>width</code>, <code>height</code>, or <code>density</code> are
  specified, then the framebuffer will keep that size until manually changed.
  Otherwise, it will be autosized, and it will update to match the main canvas's
  size and density when the main canvas changes.</p>


  <hr/>

  <p>Creates and a new <a href="/reference/p5/p5.Framebuffer/">p5.Framebuffer</a>
  object.</p>

  <p><a href="/reference/p5/p5.Framebuffer/">p5.Framebuffer</a> objects are
  separate drawing

  surfaces that can be used as textures in WebGL mode. They're similar to

  <a href="/reference/p5/p5.Graphics/">p5.Graphics</a> objects and generally run
  much

  faster when used as textures.</p>

  <p>The parameter, <code>options</code>, is optional. An object can be passed
  to configure

  the <a href="/reference/p5/p5.Framebuffer/">p5.Framebuffer</a> object. The
  available

  properties are:</p>

  <ul>

  <li><code>format</code>: data format of the texture, either
  <code>UNSIGNED_BYTE</code>, <code>FLOAT</code>, or <code>HALF_FLOAT</code>.
  Default is <code>UNSIGNED_BYTE</code>.</li>

  <li><code>channels</code>: whether to store <code>RGB</code> or
  <code>RGBA</code> color channels. Default is to match the main canvas which is
  <code>RGBA</code>.</li>

  <li><code>depth</code>: whether to include a depth buffer. Default is
  <code>true</code>.</li>

  <li><code>depthFormat</code>: data format of depth information, either
  <code>UNSIGNED_INT</code> or <code>FLOAT</code>. Default is
  <code>FLOAT</code>.</li>

  <li><code>stencil</code>: whether to include a stencil buffer for masking.
  <code>depth</code> must be <code>true</code> for this feature to work.
  Defaults to the value of <code>depth</code> which is <code>true</code>.</li>

  <li><code>antialias</code>: whether to perform anti-aliasing. If set to
  <code>true</code>, as in <code>{ antialias: true }</code>, 2 samples will be
  used by default. The number of samples can also be set, as in <code>{
  antialias: 4 }</code>. Default is to match <a
  href="/reference/p5/setAttributes/">setAttributes()</a> which is
  <code>false</code> (<code>true</code> in Safari).</li>

  <li><code>width</code>: width of the <a
  href="/reference/p5/p5.Framebuffer/">p5.Framebuffer</a> object. Default is to
  always match the main canvas width.</li>

  <li><code>height</code>: height of the <a
  href="/reference/p5/p5.Framebuffer/">p5.Framebuffer</a> object. Default is to
  always match the main canvas height.</li>

  <li><code>density</code>: pixel density of the <a
  href="/reference/p5/p5.Framebuffer/">p5.Framebuffer</a> object. Default is to
  always match the main canvas pixel density.</li>

  <li><code>textureFiltering</code>: how to read values from the <a
  href="/reference/p5/p5.Framebuffer/">p5.Framebuffer</a> object. Either
  <code>LINEAR</code> (nearby pixels will be interpolated) or
  <code>NEAREST</code> (no interpolation). Generally, use <code>LINEAR</code>
  when using the texture as an image and <code>NEAREST</code> if reading the
  texture as data. Default is <code>LINEAR</code>.</li>

  </ul>

  <p>If the <code>width</code>, <code>height</code>, or <code>density</code>
  attributes are set, they won't automatically match the main canvas and must be
  changed manually.</p>

  <p>Note: <code>createFramebuffer()</code> can only be used in WebGL mode.</p>


  <pre>

  todo: return not found in ja-legacy.

  </pre>
line: 495
isConstructor: false
itemtype: method
example:
  - |-

    <div>
    <code>
    let myBuffer;

    function setup() {
      createCanvas(100, 100, WEBGL);

      // Create a p5.Framebuffer object.
      myBuffer = createFramebuffer();

      describe('A grid of white toruses rotating against a dark gray background.');
    }

    function draw() {
      background(50);

      // Start drawing to the p5.Framebuffer object.
      myBuffer.begin();

      // Clear the drawing surface.
      clear();

      // Turn on the lights.
      lights();

      // Rotate the coordinate system.
      rotateX(frameCount * 0.01);
      rotateY(frameCount * 0.01);

      // Style the torus.
      noStroke();

      // Draw the torus.
      torus(20);

      // Stop drawing to the p5.Framebuffer object.
      myBuffer.end();

      // Iterate from left to right.
      for (let x = -50; x < 50; x += 25) {
        // Iterate from top to bottom.
        for (let y = -50; y < 50; y += 25) {
          // Draw the p5.Framebuffer object to the canvas.
          image(myBuffer, x, y, 25, 25);
        }
      }
    }
    </code>
    </div>

    <div>
    <code>
    let myBuffer;

    function setup() {
      createCanvas(100, 100, WEBGL);

      // Create an options object.
      let options = { width: 25, height: 25 };

      // Create a p5.Framebuffer object.
      // Use options for configuration.
      myBuffer = createFramebuffer(options);

      describe('A grid of white toruses rotating against a dark gray background.');
    }

    function draw() {
      background(50);

      // Start drawing to the p5.Framebuffer object.
      myBuffer.begin();

      // Clear the drawing surface.
      clear();

      // Turn on the lights.
      lights();

      // Rotate the coordinate system.
      rotateX(frameCount * 0.01);
      rotateY(frameCount * 0.01);

      // Style the torus.
      noStroke();

      // Draw the torus.
      torus(5, 2.5);

      // Stop drawing to the p5.Framebuffer object.
      myBuffer.end();

      // Iterate from left to right.
      for (let x = -50; x < 50; x += 25) {
        // Iterate from top to bottom.
        for (let y = -50; y < 50; y += 25) {
          // Draw the p5.Framebuffer object to the canvas.
          image(myBuffer, x, y);
        }
      }
    }
    </code>
    </div>
class: p5
params:
  - name: options
    description: |
      <p>(オプション) 設定を含むオプションのオブジェクト</p>
      <p>configuration options.</p>
    type: Object
    optional: true
return:
  description: new framebuffer.
  type: p5.Framebuffer
chainable: false
---


# createFramebuffer
