---
title: userStartAudio
module: p5.sound
submodule: p5.sound
file: lib/addons/p5.sound.js
description: >-
  <p>ユーザーにオーディオの開始制御を与えることはよい慣習だけでなく、iOS や <a href="https://goo.gl/7K7WLu"
  title="Google Chrome's autoplay policy">Google Chrome</a> などの多くの Web
  ブラウザーによって強制されるポリシーです。</p>

  <p>これらのブラウザー固有のポリシーでは、Web Audio API の <a
  href="https://developer.mozilla.org/ja/docs/Web/API/AudioContext" title="Audio
  Context @ MDN">Audio Context</a> は一時停止状態で作成されます。</p>

  <p>これらの場合、ユーザーが操作イベント（例:
  <code>mousePressed()</code>）を明示的に再開するか、オーディオノードを開始するまで、サウンドは再生されません。これは、<code>p5.Oscillator</code>
  の <code>start()</code>、<code>p5.SoundFile</code> の <code>play()</code>、または
  <code>userStartAudio()</code> を呼び出すことで達成できます。</p>

  <p><code>userStartAudio()</code> は、ユーザージェスチャーで AudioContext
  を開始します。デフォルトの動作では、どの mouseUp または touchEnd
  イベントでもオーディオが有効になります。下の例のように、<code>mousePressed()</code>
  などの特定のインタラクション関数に配置することもできます。この方法では、Yotam Mann による <a
  href="https://github.com/tambien/StartAudioContext">StartAudioContext </a>
  ライブラリ（MIT ライセンス、2016年）を使用します。</p>


  <hr/>

  <p>It is not only a good practice to give users control over starting

  audio. This policy is enforced by many web browsers, including iOS and

  <a href="https://goo.gl/7K7WLu" title="Google Chrome's autoplay

  policy">Google Chrome</a>, which create the Web Audio API's

  <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioContext"
  title="Audio Context @ MDN">Audio Context</a>

  in a suspended state.</p>


  <p>In these browser-specific policies, sound will not play until a user

  interaction event (i.e. <code>mousePressed()</code>) explicitly resumes

  the AudioContext, or starts an audio node. This can be accomplished by

  calling <code>start()</code> on a <code>p5.Oscillator</code>,

  <code> play()</code> on a <code>p5.SoundFile</code>, or simply

  <code>userStartAudio()</code>.</p>


  <p><code>userStartAudio()</code> starts the AudioContext on a user

  gesture. The default behavior will enable audio on any

  mouseUp or touchEnd event. It can also be placed in a specific

  interaction function, such as <code>mousePressed()</code> as in the

  example below. This method utilizes

  <a href="https://github.com/tambien/StartAudioContext">StartAudioContext

  </a>, a library by Yotam Mann (MIT Licence, 2016).</p>
line: 198
isConstructor: false
itemtype: method
example:
  - |-

    <div><code>
    function setup() {
      // mimics the autoplay policy
      getAudioContext().suspend();

      let mySynth = new p5.MonoSynth();

      // This won't play until the context has resumed
      mySynth.play('A6');
    }
    function draw() {
      background(220);
      textAlign(CENTER, CENTER);
      text(getAudioContext().state, width/2, height/2);
    }
    function mousePressed() {
      userStartAudio();
    }
    </code></div>
class: p5
params:
  - name: elements
    description: >
      <p> (オプション) この引数は Element、Selector String、NodeList、p5.Element、jQuery
      Element、またはそれらのいずれかの配列である必要があります。</p>

      <p>This argument can be an Element,
                                    Selector String, NodeList, p5.Element,
                                    jQuery Element, or an Array of any of those.</p>
    type: Element|Array
    optional: true
  - name: callback
    description: |
      <p> (オプション) AudioContext が開始されたときに呼び出すコールバック関数</p>
      <p>Callback to invoke when the AudioContext
                                    has started</p>
    type: Function
    optional: true
return:
  description: |-
    AudioContext の状態が「実行中」になったときに解決される Promise を返します
    Returns a Promise that resolves when
                                         the AudioContext state is 'running'
  type: Promise
chainable: false
---


# userStartAudio
