---
title: baseNormalShader
module: 3D
submodule: Material
file: src/webgl/material.js
description: >
  <p><a
  href="/reference/p5/normalMaterial/"><code>normalMaterial()</code></a>で使用されるシェーダーを取得します。</p>

  <p><a
  href="/reference/p5.Shader/modify/"><code>baseNormalShader().modify()</code></a>を呼び出して、
  以下のフックのいずれかを変更することができます：</p>

  <table>

  <thead>

  <tr>

  <th>フック</th>

  <th>説明</th>

  </tr>

  </thead>

  <tbody><tr>

  <td><code>void beforeVertex</code></td>

  <td>頂点シェーダーの開始時に呼び出されます。</td>

  </tr>

  <tr>

  <td><code>vec3 getLocalPosition</code></td>

  <td>変換が適用される前に頂点の位置を更新します。<code>vec3 position</code>を受け取り、
  修正されたバージョンを返す必要があります。</td>

  </tr>

  <tr>

  <td><code>vec3 getWorldPosition</code></td>

  <td>変換が適用された後に頂点の位置を更新します。<code>vec3 position</code>を受け取り、
  修正されたバージョンを返す必要があります。</td>

  </tr>

  <tr>

  <td><code>vec3 getLocalNormal</code></td>

  <td>変換が適用される前に法線を更新します。<code>vec3 normal</code>を受け取り、
  修正されたバージョンを返す必要があります。</td>

  </tr>

  <tr>

  <td><code>vec3 getWorldNormal</code></td>

  <td>変換が適用された後に法線を更新します。<code>vec3 normal</code>を受け取り、
  修正されたバージョンを返す必要があります。</td>

  </tr>

  <tr>

  <td><code>vec2 getUV</code></td>

  <td>テクスチャ座標を更新します。<code>vec2 uv</code>を受け取り、
  修正されたバージョンを返す必要があります。</td>

  </tr>

  <tr>

  <td><code>vec4 getVertexColor</code></td>

  <td>各頂点の色を更新します。<code>vec4 color</code>を受け取り、
  修正されたバージョンを返す必要があります。</td>

  </tr>

  <tr>

  <td><code>void afterVertex</code></td>

  <td>頂点シェーダーの終了時に呼び出されます。</td>

  </tr>

  <tr>

  <td><code>void beforeFragment</code></td>

  <td>フラグメントシェーダーの開始時に呼び出されます。</td>

  </tr>

  <tr>

  <td><code>vec4 getFinalColor</code></td>

  <td>ミキシング後の最終的な色を更新します。<code>vec4 color</code>を受け取り、
  修正されたバージョンを返す必要があります。</td>

  </tr>

  <tr>

  <td><code>void afterFragment</code></td>

  <td>フラグメントシェーダーの終了時に呼び出されます。</td>

  </tr>

  </tbody></table>

  <p>ほとんどの場合、フックはGLSL ESバージョン300で記述する必要があります。
  WebGL 2の代わりにWebGL 1を使用している場合は、代わりにGLSL ES 100でフックを記述してください。</p>

  <p><code>baseNormalShader().inspectHooks()</code>を呼び出すと、可能なすべてのフックと
  それらのデフォルト実装を確認できます。</p>
line: 1197
isConstructor: false
itemtype: method
example:
  - |-

    <div modernizr='webgl'>
    <code>
    let myShader;

    function setup() {
      createCanvas(200, 200, WEBGL);
      myShader = baseNormalShader().modify({
        uniforms: {
          'float time': () => millis()
        },
        'vec3 getWorldPosition': `(vec3 pos) {
          pos.y += 20. * sin(time * 0.001 + pos.x * 0.05);
          return pos;
        }`
      });
    }

    function draw() {
      background(255);
      shader(myShader);
      noStroke();
      sphere(50);
    }
    </code>
    </div>
  - |-

    <div modernizr='webgl'>
    <code>
    let myShader;

    function setup() {
      createCanvas(200, 200, WEBGL);
      myShader = baseNormalShader().modify({
        'vec3 getWorldNormal': '(vec3 normal) { return abs(normal); }',
        'vec4 getFinalColor': `(vec4 color) {
          // 古い法線のr、g、b値を単なる赤、緑、青ではなく
          // 新しい色にマッピングします：
          vec3 newColor =
            color.r * vec3(89.0, 240.0, 232.0) / 255.0 +
            color.g * vec3(240.0, 237.0, 89.0) / 255.0 +
            color.b * vec3(205.0, 55.0, 222.0) / 255.0;
          newColor = newColor / (color.r + color.g + color.b);
          return vec4(newColor, 1.0) * color.a;
        }`
      });
    }

    function draw() {
      background(255);
      shader(myShader);
      noStroke();
      rotateX(frameCount * 0.01);
      rotateY(frameCount * 0.015);
      box(100);
    }
    </code>
    </div>
class: p5
return:
  description: ノーマルマテリアルシェーダー
  type: p5.Shader
chainable: false
beta: true
---


# baseNormalShader
