---
title: pixels
module: Image
submodule: Pixels
file: src/image/pixels.js
description: >
  <p>キャンバス上の各ピクセルの色を含む配列。</p>

  <p>色は赤、緑、青、アルファ（RGBA）の値を表す数値として格納されます。

  <code>pixels</code>はパフォーマンス上の理由から一次元配列です。</p>

  <p>各ピクセルは<code>pixels</code>配列の4つの要素を占め、それぞれRGBA値を

  表します。例えば、座標(0, 0)のピクセルはそのRGBA値を

  <code>pixels[0]</code>、<code>pixels[1]</code>、<code>pixels[2]</code>、<code>pixels[3]</code>に

  それぞれ格納します。次の座標(1, 0)のピクセルはそのRGBA値を<code>pixels[4]</code>、

  <code>pixels[5]</code>、<code>pixels[6]</code>、<code>pixels[7]</code>に格納します。

  このように続きます。100×100のキャンバスの<code>pixels</code>配列は

  100 × 100 × 4 = 40,000個の要素を持ちます。</p>

  <p>一部のディスプレイでは、1つの点の色を設定するために複数の小さなピクセルを

  使用します。<a href="/reference/p5/pixelDensity/">pixelDensity()</a>関数は

  キャンバスのピクセル密度を返します。高密度ディスプレイでは多くの場合、

  <a href="/reference/p5/pixelDensity/">pixelDensity()</a>は2を返します。

  そのようなディスプレイでは、100×100のキャンバスの<code>pixels</code>配列は

  200 × 200 × 4 = 160,000個の要素を持ちます。</p>

  <p>キャンバス上の点のRGBA値にアクセスするには、以下に示すように少し計算が

  必要です。<code>pixels</code>配列にアクセスする前に

  <a href="/reference/p5/loadPixels/">loadPixels()</a>関数を呼び出す必要があります。

  変更を加えた後は<a href="/reference/p5/updatePixels/">updatePixels()</a>関数を

  呼び出す必要があります。</p>
line: 12
isConstructor: false
itemtype: property
example:
  - |-

    <div>
    <code>
    function setup() {
      createCanvas(100, 100);

      // ピクセル配列を読み込む
      loadPixels();

      // ドットの座標を設定
      let x = 50;
      let y = 50;

      // ピクセル密度を取得
      let d = pixelDensity();

      // キャンバスの中心にあるピクセルを黒に設定
      for (let i = 0; i < d; i += 1) {
        for (let j = 0; j < d; j += 1) {
          let index = 4 * ((y * d + j) * width * d + (x * d + i));
          // 赤
          pixels[index] = 0;
          // 緑
          pixels[index + 1] = 0;
          // 青
          pixels[index + 2] = 0;
          // アルファ
          pixels[index + 3] = 255;
        }
      }

      // キャンバスを更新
      updatePixels();

      describe('灰色の長方形の中央に黒い点がある。');
    }
    </code>
    </div>

    <div>
    <code>
    function setup() {
      createCanvas(100, 100);

      // ピクセル配列を読み込む
      loadPixels();

      // ピクセル密度を取得
      let d = pixelDensity();

      // ピクセル配列の半分のインデックスを計算
      let halfImage = 4 * (d * width) * (d * height / 2);

      // キャンバスの上半分を赤にする
      for (let i = 0; i < halfImage; i += 4) {
        // 赤
        pixels[i] = 255;
        // 緑
        pixels[i + 1] = 0;
        // 青
        pixels[i + 2] = 0;
        // アルファ
        pixels[i + 3] = 255;
      }

      // キャンバスを更新
      updatePixels();

      describe('灰色の長方形の上に赤い長方形が描かれている。');
    }
    </code>
    </div>

    <div>
    <code>
    function setup() {
      createCanvas(100, 100);

      // p5.Colorオブジェクトを作成
      let pink = color(255, 102, 204);

      // ピクセル配列を読み込む
      loadPixels();

      // ピクセル密度を取得
      let d = pixelDensity();

      // ピクセル配列の半分のインデックスを計算
      let halfImage = 4 * (d * width) * (d * height / 2);

      // キャンバスの上半分をピンクにする
      for (let i = 0; i < halfImage; i += 4) {
        pixels[i] = red(pink);
        pixels[i + 1] = green(pink);
        pixels[i + 2] = blue(pink);
        pixels[i + 3] = alpha(pink);
      }

      // キャンバスを更新
      updatePixels();

      describe('灰色の長方形の上にピンクの長方形が描かれている。');
    }
    </code>
    </div>
class: p5
type: 'Number[]'
---


# pixels

