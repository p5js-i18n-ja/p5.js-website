---
title: p5.Image
module: Image
submodule: Image
file: src/image/p5.Image.js
description: >
  <p>画像を表現するクラスです。</p>

  <p>画像はピクセルの長方形のグリッドで、表示や修正が可能です。</p>

  <p>既存の画像は<a href="/reference/p5/loadImage/">loadImage()</a>を呼び出すことで

  読み込むことができます。空の画像は<a href="/reference/p5/createImage/">createImage()</a>を

  呼び出すことで作成できます。<code>p5.Image</code>オブジェクトには、

  フィルターの適用やピクセル値の変更など、一般的なタスクのための

  メソッドがあります。</p>
line: 21
isConstructor: true
params:
  - name: width
    description: ''
    type: Number
  - name: height
    description: ''
    type: Number
example:
  - |-

    <div>
    <code>
    let img;

    // 画像を読み込みます。
    function preload() {
      img = loadImage('/assets/bricks.jpg');
    }

    function setup() {
      createCanvas(100, 100);

      // 画像を表示します。
      image(img, 0, 0);

      describe('レンガの壁の画像。');
    }
    </code>
    </div>

    <div>
    <code>
    let img;

    // 画像を読み込みます。
    function preload() {
      img = loadImage('/assets/bricks.jpg');
    }

    function setup() {
      createCanvas(100, 100);

      // GRAYフィルターを適用します。
      img.filter(GRAY);

      // 画像を表示します。
      image(img, 0, 0);

      describe('レンガの壁のグレースケール画像。');
    }
    </code>
    </div>

    <div>
    <code>
    function setup() {
      createCanvas(100, 100);

      background(200);

      // p5.Imageオブジェクトを作成します。
      let img = createImage(66, 66);

      // 画像のピクセルを読み込みます。
      img.loadPixels();

      // ピクセルを黒に設定します。
      for (let x = 0; x < img.width; x += 1) {
        for (let y = 0; y < img.height; y += 1) {
          img.set(x, y, 0);
        }
      }

      // 画像を更新します。
      img.updatePixels();

      // 画像を表示します。
      image(img, 17, 17);

      describe('灰色の正方形の中央に描かれた黒い正方形。');
    }
    </code>
    </div>
methods:
  pixelDensity:
    description: |
      <p>高ピクセル密度ディスプレイ用のピクセル密度を取得または設定します。</p>
      <p>デフォルトでは、密度は1に設定されます。</p>
      <p>引数なしでこのメソッドを呼び出すとデフォルトの密度を取得し、数値を渡すと
      密度を設定します。0以下の数値が提供された場合、デフォルトで1になります。</p>
    path: p5.Image/pixelDensity
  loadPixels:
    description: >
      <p>画像内の各ピクセルの現在の値を<code>img.pixels</code>配列に

      読み込みます。</p>

      <p><code>img.loadPixels()</code>は、ピクセル値の読み取りや

      変更の前に呼び出す必要があります。</p>
    path: p5.Image/loadPixels
  updatePixels:
    description: >
      <p><a href="/reference/p5.Image/pixels/">img.pixels</a>配列のRGBA値で

      キャンバスを更新します。</p>

      <p><code>img.updatePixels()</code>は、<a
      href="/reference/p5.Image/pixels/">img.pixels</a>

      配列の値を変更した後にのみ呼び出す必要があります。このような変更は、

      <a href="/reference/p5.Image/loadPixels/">img.loadPixels()</a>を呼び出した直後か、

      <a href="/reference/p5.Image/set/">img.set()</a>を呼び出すことで

      行うことができます。</p>

      <p>オプションのパラメータ<code>x</code>、<code>y</code>、<code>width</code>、<code>height</code>は、

      更新する画像のサブセクションを定義します。これを行うことで、

      場合によってはパフォーマンスが向上する可能性があります。</p>

      <p>画像がGIFから読み込まれた場合、<code>img.updatePixels()</code>を呼び出すと

      現在のフレームのピクセルが更新されます。</p>
    path: p5.Image/updatePixels
  get:
    description: >
      <p>画像からピクセルまたはピクセル領域を取得します。</p>

      <p><code>img.get()</code>は使いやすいですが、

      <a href="/reference/p5.Image/pixels/">img.pixels</a>ほど高速ではありません。

      多くのピクセル値を読み取るには<a
      href="/reference/p5.Image/pixels/">img.pixels</a>を使用してください。</p>

      <p>パラメータなしの<code>img.get()</code>バージョンは、画像全体を返します。</p>

      <p>2つのパラメータを持つ<code>img.get()</code>バージョン（例：<code>img.get(10,
      20)</code>）は、

      それらを座標として解釈します。指定されたポイントのピクセルの

      <code>[R, G, B, A]</code>値を含む配列を返します。</p>

      <p>4つのパラメータを持つ<code>img.get()</code>バージョン（例：

      <code>img,get(10, 20, 50, 90)</code>）は、それらを座標と寸法として解釈します。

      最初の2つのパラメータはサブセクションの左上隅の座標です。

      最後の2つのパラメータはサブセクションの幅と高さです。

      新しい<a href="/reference/p5/p5.Image">p5.Image</a>オブジェクトでキャンバスの

      サブセクションを返します。</p>

      <p>画像を直接操作するには、<a href="/reference/p5/get/">get()</a>の代わりに

      <code>img.get()</code>を使用してください。</p>
    path: p5.Image/get
  set:
    description: >
      <p>画像内の1つ以上のピクセルの色を設定します。</p>

      <p><code>img.set()</code>は使いやすいですが、

      <a href="/reference/p5.Image/pixels/">img.pixels</a>ほど高速ではありません。

      多くのピクセル値を設定するには<a
      href="/reference/p5.Image/pixels/">img.pixels</a>を使用してください。</p>

      <p><code>img.set()</code>は最初の2つのパラメータをx座標とy座標として解釈します。

      最後のパラメータはグレースケール値、<code>[R, G, B, A]</code>ピクセル配列、

      <a href="/reference/p5/p5.Color">p5.Color</a>オブジェクト、または別の

      <a href="/reference/p5/p5.Image">p5.Image</a>オブジェクトとして解釈されます。</p>

      <p>変更を反映させるには、<code>img.set()</code>の使用後に

      <a href="/reference/p5.Image/updatePixels/">img.updatePixels()</a>を

      呼び出す必要があります。</p>
    path: p5.Image/set
  resize:
    description: >
      <p>画像を指定された幅と高さにリサイズします。</p>

      <p>画像の元のアスペクト比は、<code>width</code>または<code>height</code>のいずれかに0を

      渡すことで保持できます。例えば、500 × 300ピクセルの画像に対して

      <code>img.resize(50, 0)</code>を呼び出すと、50 × 30ピクセルにリサイズされます。</p>
    path: p5.Image/resize
  copy:
    description: >
      <p>ソース画像からこの画像にピクセルをコピーします。</p>

      <p>最初のパラメータ<code>srcImage</code>は、コピーするオプションの

      <a href="/reference/p5/p5.Image">p5.Image</a>オブジェクトです。ソース画像が

      渡されない場合、<code>img.copy()</code>はこの画像の一部を別の

      領域にコピーできます。</p>

      <p>次の4つのパラメータ<code>sx</code>、<code>sy</code>、<code>sw</code>、<code>sh</code>は、

      ソース画像からコピーする領域を決定します。<code>(sx, sy)</code>は

      領域の左上隅です。<code>sw</code>と<code>sh</code>は領域の幅と高さです。</p>

      <p>次の4つのパラメータ<code>dx</code>、<code>dy</code>、<code>dw</code>、<code>dh</code>は、

      この画像にコピーする領域を決定します。<code>(dx, dy)</code>は

      領域の左上隅です。<code>dw</code>と<code>dh</code>は領域の幅と高さです。</p>

      <p><code>img.copy()</code>を呼び出すと、ソース領域が目的の領域と

      同じサイズでない場合、ピクセルがスケーリングされます。</p>
    path: p5.Image/copy
  mask:
    description: >
      <p>画像の一部を別の画像でマスクします。</p>

      <p><code>img.mask()</code>は、別の<a
      href="/reference/p5/p5.Image">p5.Image</a>オブジェクトの

      アルファチャンネルをこの画像のアルファチャンネルとして使用します。マスクは

      累積的であり、一度適用されると削除できません。マスクがこの画像と

      異なるピクセル密度を持つ場合、マスクはスケーリングされます。</p>
    path: p5.Image/mask
  filter:
    description: >
      <p>画像にイメージフィルターを適用します。</p>

      <p>プリセットのオプションは以下の通りです：</p>

      <p><code>INVERT</code>

      画像の色を反転させます。パラメータは使用されません。</p>

      <p><code>GRAY</code>

      画像をグレースケールに変換します。パラメータは使用されません。</p>

      <p><code>THRESHOLD</code>

      画像を白黒に変換します。指定されたしきい値より上のグレースケール値を持つ

      ピクセルは白に変換されます。残りは黒に変換されます。しきい値は

      0.0（黒）から1.0（白）の間でなければなりません。値が指定されない場合、

      0.5が使用されます。</p>

      <p><code>OPAQUE</code>

      アルファチャンネルを完全に不透明に設定します。パラメータは使用されません。</p>

      <p><code>POSTERIZE</code>

      画像の色数を制限します。各色チャンネルは指定された色数に

      制限されます。2から255の間の値が有効ですが、

      低い値ほど結果が顕著になります。デフォルト値は4です。</p>

      <p><code>BLUR</code>

      画像をぼかします。ぼかしのレベルはぼかし半径によって指定されます。

      値が大きいほどぼかしが強くなります。デフォルト値は4です。<code>P2D</code>モードでは

      ガウシアンぼかしが使用されます。<code>WEBGL</code>モードではボックスぼかしが

      使用されます。</p>

      <p><code>ERODE</code>

      明るい領域を縮小します。パラメータは使用されません。</p>

      <p><code>DILATE</code>

      明るい領域を拡大します。パラメータは使用されません。</p>
    path: p5.Image/filter
  blend:
    description: >
      <p>別の画像からこの画像にピクセル領域をコピーしてブレンドします。</p>

      <p>最初のパラメータ<code>srcImage</code>は、ブレンドする

      <a href="/reference/p5/p5.Image">p5.Image</a>オブジェクトです。</p>

      <p>次の4つのパラメータ<code>sx</code>、<code>sy</code>、<code>sw</code>、<code>sh</code>は、

      ソース画像からブレンドする領域を決定します。<code>(sx, sy)</code>は

      領域の左上隅です。<code>sw</code>と<code>sh</code>は領域の幅と高さです。</p>

      <p>次の4つのパラメータ<code>dx</code>、<code>dy</code>、<code>dw</code>、<code>dh</code>は、

      キャンバスにブレンドする領域を決定します。<code>(dx, dy)</code>は

      領域の左上隅です。<code>dw</code>と<code>dh</code>は領域の幅と高さです。</p>

      <p>10番目のパラメータ<code>blendMode</code>は、画像の色をブレンドするために

      使用するエフェクトを設定します。オプションは<code>BLEND</code>、<code>DARKEST</code>、
      <code>LIGHTEST</code>、<code>DIFFERENCE</code>、

      <code>MULTIPLY</code>、<code>EXCLUSION</code>、<code>SCREEN</code>、<code>REPLACE</code>、<code>OVERLAY</code>、<code>HARD_LIGHT</code>、

      <code>SOFT_LIGHT</code>、<code>DODGE</code>、<code>BURN</code>、<code>ADD</code>、または<code>NORMAL</code>です。</p>
    path: p5.Image/blend
  save:
    description: >
      <p>画像をファイルに保存します。</p>

      <p>デフォルトでは、<code>img.save()</code>は画像を<code>untitled.png</code>という

      名前のPNG画像として保存します。</p>

      <p>最初のパラメータ<code>filename</code>はオプションです。ファイルの名前を

      設定する文字列です。ファイル拡張子が含まれている場合（例：

      <code>img.save('drawing.png')</code>）、画像はその形式で保存されます。</p>

      <p>2番目のパラメータ<code>extension</code>もオプションです。ファイルの形式を

      設定します。<code>'png'</code>または<code>'jpg'</code>のいずれかを使用できます。例えば、
      <code>img.save('drawing', 'jpg')</code>

      はキャンバスを<code>drawing.jpg</code>というファイルに保存します。</p>

      <p>注意：ブラウザはファイルを即座に保存するか、ユーザーにダイアログ

      ウィンドウでプロンプトを表示します。</p>

      <p>画像は、GIFファイルから読み込まれた場合にのみ、アニメーションGIFとして

      ダウンロードされます。新しいGIFを作成するには<a href="/reference/p5/saveGif/">saveGif()</a>を

      参照してください。</p>
    path: p5.Image/save
  reset:
    description: |
      <p>アニメーションGIFを最初のフレームに戻します。</p>
    path: p5.Image/reset
  getCurrentFrame:
    description: |
      <p>アニメーションGIFの現在のフレームのインデックスを取得します。</p>
    path: p5.Image/getCurrentFrame
  setFrame:
    description: |
      <p>アニメーションGIFの現在のフレームを設定します。</p>
    path: p5.Image/setFrame
  numFrames:
    description: |
      <p>アニメーションGIFのフレーム数を返します。</p>
    path: p5.Image/numFrames
  play:
    description: |
      <p><a href="/reference/p5.Image/pause/">img.pause()</a>で一時停止された
      アニメーションGIFを再生します。</p>
    path: p5.Image/play
  pause:
    description: |
      <p>アニメーションGIFを一時停止します。</p>
      <p>GIFは<a href="/reference/p5.Image/play/">img.play()</a>を呼び出すことで
      再開できます。</p>
    path: p5.Image/pause
  delay:
    description: >
      <p>アニメーションGIFのフレーム間の遅延を変更します。</p>

      <p>最初のパラメータ<code>delay</code>は、遅延の長さをミリ秒単位で指定します。</p>

      <p>2番目のパラメータ<code>index</code>はオプションです。提供された場合、

      <code>index</code>のフレームの遅延のみが変更されます。他のすべてのフレームは

      デフォルトの遅延を保持します。</p>
    path: p5.Image/delay
properties:
  width:
    description: |
      <p>画像の幅（ピクセル単位）。</p>
    path: p5.Image/width
  height:
    description: |
      <p>画像の高さ（ピクセル単位）。</p>
    path: p5.Image/height
  pixels:
    description: >
      <p>画像内の各ピクセルの色を含む配列。</p>

      <p>色は赤、緑、青、アルファ（RGBA）値を表す数値として

      保存されます。<code>img.pixels</code>はパフォーマンス上の理由から

      1次元配列です。</p>

      <p>各ピクセルはピクセル配列内で4つの要素を占め、それぞれが

      RGBA値に対応します。例えば、座標(0, 0)のピクセルは

      <code>img.pixels[0]</code>、<code>img.pixels[1]</code>、<code>img.pixels[2]</code>、

      <code>img.pixels[3]</code>にそれぞれRGBA値を格納します。次の座標(1, 0)の

      ピクセルは<code>img.pixels[4]</code>、<code>img.pixels[5]</code>、

      <code>img.pixels[6]</code>、<code>img.pixels[7]</code>にRGBA値を格納します。以下同様です。
      100×100の<a href="/reference/p5/p5.Image">p5.Image</a>オブジェクトの<code>img.pixels</code>配列は

      100 × 100 × 4 = 40,000個の要素を持ちます。</p>

      <p>画像内のピクセルのRGBA値にアクセスするには、以下の例に示すように

      少し計算が必要です。<code>img.pixels</code>配列にアクセスする前に

      <a href="/reference/p5.Image/loadPixels/">img.loadPixels()</a>

      メソッドを呼び出す必要があります。変更を加えた後は

      <a href="/reference/p5.Image/updatePixels/">img.updatePixels()</a>メソッドを

      呼び出す必要があります。</p>
    path: p5.Image/pixels
chainable: false
---


# p5.Image