---
title: keyPressed
module: Events
submodule: Keyboard
file: src/events/keyboard.js
description: >
  <p>任意のキーが押されたときに一度呼び出される関数です。</p>

  <p><code>keyPressed()</code>関数を宣言すると、ユーザーが任意のキーを押したときに
  自動的に一度実行されるコードブロックを設定します：</p>

  <pre><code class="language-js">function keyPressed() {
    // 実行するコード
  }

  </code></pre>

  <p><a href="/reference/p5/key/">key</a>変数と<a
  href="/reference/p5/keyCode/">keyCode</a>変数は、

  p5.jsによって<code>keyPressed()</code>が呼び出されたときに、

  最後に入力された値で更新されます：</p>

  <pre><code class="language-js">function keyPressed() {
    if (key === 'c') {
      // 実行するコード
    }

    if (keyCode === ENTER) {
      // 実行するコード
    }
  }

  </code></pre>

  <p>パラメータ<code>event</code>はオプションです。<code>keyPressed()</code>には常に

  <a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/"
  target="_blank">KeyboardEvent</a>

  オブジェクトが渡され、キー押下イベントを説明するプロパティを持っています：</p>

  <pre><code class="language-js">function keyPressed(event) {
    // イベントを使用して実行するコード
    console.log(event);
  }

  </code></pre>

  <p>ブラウザには、様々なキーイベントにデフォルトの動作が設定されている場合があります。

  例えば、一部のブラウザでは<code>SPACE</code>キーを押すとウェブページの下部にジャンプします。

  このイベントのデフォルトの動作を防ぐには、関数の最後に

  <code>return false;</code>を追加してください。</p>
line: 284
isConstructor: false
itemtype: method
example:
  - |-

    <div>
    <code>
    // キャンバスをクリックしてキー押下の検出を開始します。

    let value = 0;

    function setup() {
      createCanvas(100, 100);

      describe(
        '中央に黒い正方形がある灰色の正方形。ユーザーがキーを押すと内側の正方形の色が変わります。'
      );
    }

    function draw() {
      background(200);

      // 正方形のスタイルを設定
      fill(value);

      // 正方形を描画
      square(25, 25, 50);
    }

    // ユーザーがキーを押したときに背景色を切り替えます。
    function keyPressed() {
      if (value === 0) {
        value = 255;
      } else {
        value = 0;
      }
      // デフォルトの動作を防ぐにはコメントを解除してください。
      // return false;
    }
    </code>
    </div>

    <div>
    <code>
    // キャンバスをクリックしてキー押下の検出を開始します。

    let value = 0;

    function setup() {
      createCanvas(100, 100);

      describe(
        '中央に白い正方形がある灰色の正方形。ユーザーが"b"キーを押すと内側の正方形が黒くなります。"a"キーを押すと白くなります。'
      );
    }

    function draw() {
      background(200);

      // 正方形のスタイルを設定
      fill(value);

      // 正方形を描画
      square(25, 25, 50);
    }

    // ユーザーが'a'または'b'キーを押したときにvalueを再割り当てします。
    function keyPressed() {
      if (key === 'a') {
        value = 255;
      } else if (key === 'b') {
        value = 0;
      }
      // デフォルトの動作を防ぐにはコメントを解除してください。
      // return false;
    }
    </code>
    </div>

    <div>
    <code>
    // キャンバスをクリックしてキー押下の検出を開始します。

    let value = 0;

    function setup() {
      createCanvas(100, 100);

      describe(
        '中央に黒い正方形がある灰色の正方形。ユーザーが左矢印キーを押すと内側の正方形が白くなります。右矢印キーを押すと黒くなります。'
      );
    }

    function draw() {
      background(200);

      // 正方形のスタイルを設定
      fill(value);

      // 正方形を描画
      square(25, 25, 50);
    }

    // ユーザーが矢印キーを押したときに背景色を切り替えます。
    function keyPressed() {
      if (keyCode === LEFT_ARROW) {
        value = 255;
      } else if (keyCode === RIGHT_ARROW) {
        value = 0;
      }
      // デフォルトの動作を防ぐにはコメントを解除してください。
      // return false;
    }
    </code>
    </div>
class: p5
params:
  - name: event
    description: |
      <p>オプションの<code>KeyboardEvent</code>コールバック引数。</p>
    type: KeyboardEvent
    optional: true
chainable: false
---


# keyPressed

