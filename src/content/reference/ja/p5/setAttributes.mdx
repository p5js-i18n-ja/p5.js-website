---
title: setAttributes
module: Rendering
submodule: Rendering
file: src/webgl/p5.RendererGL.js
description: |
  <p>WebGL描画コンテキストの属性を設定します。
  これは、WebGLレンダラーの動作を微調整して、
  表示とパフォーマンスを調整する方法です。</p>
  <p>WebGLキャンバスが作成された後に呼び出された場合、
  描画コンテキストが再初期化されることに注意してください。</p>
  <p>オブジェクトがパラメータとして渡された場合、
  オブジェクトで宣言されていないすべての属性はデフォルト値に設定されます。</p>
  <p>利用可能な属性は以下の通りです：
  <br>
  alpha - キャンバスにアルファバッファが含まれているかどうかを示します
  デフォルトはtrueです</br></p>
  <p>depth - 描画バッファに少なくとも16ビットの深度バッファがあるかどうかを示します
  デフォルトはtrueです</p>
  <p>stencil - 描画バッファに少なくとも8ビットのステンシルバッファがあるかどうかを示します</p>
  <p>antialias - アンチエイリアシングを実行するかどうかを示します
  デフォルトはfalseです（Safariではtrue）</p>
  <p>premultipliedAlpha - ページコンポジタが描画バッファに
  事前に乗算されたアルファを含む色が含まれていると仮定することを示します
  デフォルトはtrueです</p>
  <p>preserveDrawingBuffer - trueの場合、バッファはクリアされず、
  作者によってクリアまたは上書きされるまでその値を保持します
  （p5は描画ループで自動的にクリアすることに注意）
  デフォルトはtrueです</p>
  <p>perPixelLighting - trueの場合、ライティングシェーダーでピクセルごとのライティングが使用されます
  そうでない場合は頂点ごとのライティングが使用されます。
  デフォルトはtrueです。</p>
  <p>version - 1または2を指定して、要求するWebGLバージョンを指定します。デフォルトでは
  WebGL 2が要求されます。WebGL2が利用できない場合は、WebGL 1にフォールバックします。
  グローバルな<code>webglVersion</code>プロパティを確認することで、使用されているバージョンを確認できます。</p>
line: 118
isConstructor: false
itemtype: method
alt: 滑らかな縁を持つ回転する立方体
example:
  - |-

    <div>
    <code>
    function setup() {
      createCanvas(100, 100, WEBGL);
    }

    function draw() {
      background(255);
      push();
      rotateZ(frameCount * 0.02);
      rotateX(frameCount * 0.02);
      rotateY(frameCount * 0.02);
      fill(0, 0, 0);
      box(50);
      pop();
    }
    </code>
    </div>
    <br>
    アンチエイリアス属性をtrueに設定した場合。
    <br>
    <div>
    <code>
    function setup() {
      setAttributes('antialias', true);
      createCanvas(100, 100, WEBGL);
    }

    function draw() {
      background(255);
      push();
      rotateZ(frameCount * 0.02);
      rotateX(frameCount * 0.02);
      rotateY(frameCount * 0.02);
      fill(0, 0, 0);
      box(50);
      pop();
    }
    </code>
    </div>

    <div>
    <code>
    // マウスボタンを押してperPixelLightingを無効にする
    function setup() {
      createCanvas(100, 100, WEBGL);
      noStroke();
      fill(255);
    }

    let lights = [
      { c: '#f00', t: 1.12, p: 1.91, r: 0.2 },
      { c: '#0f0', t: 1.21, p: 1.31, r: 0.2 },
      { c: '#00f', t: 1.37, p: 1.57, r: 0.2 },
      { c: '#ff0', t: 1.12, p: 1.91, r: 0.7 },
      { c: '#0ff', t: 1.21, p: 1.31, r: 0.7 },
      { c: '#f0f', t: 1.37, p: 1.57, r: 0.7 }
    ];

    function draw() {
      let t = millis() / 1000 + 1000;
      background(0);
      directionalLight(color('#222'), 1, 1, 1);

      for (let i = 0; i < lights.length; i++) {
        let light = lights[i];
        pointLight(
          color(light.c),
          p5.Vector.fromAngles(t * light.t, t * light.p, width * light.r)
        );
      }

      specularMaterial(255);
      sphere(width * 0.1);

      rotateX(t * 0.77);
      rotateY(t * 0.83);
      rotateZ(t * 0.91);
      torus(width * 0.3, width * 0.07, 24, 10);
    }

    function mousePressed() {
      setAttributes('perPixelLighting', false);
      noStroke();
      fill(255);
    }
    function mouseReleased() {
      setAttributes('perPixelLighting', true);
      noStroke();
      fill(255);
    }
    </code>
    </div>
class: p5
overloads:
  - line: 118
    params:
      - name: key
        description: |
          <p>属性の名前</p>
        type: String
      - name: value
        description: |
          <p>指定された属性の新しい値</p>
        type: Boolean
  - line: 262
    params:
      - name: obj
        description: |
          <p>キーと値のペアを持つオブジェクト</p>
        type: Object
chainable: false
---


# setAttributes

